[
 %% Riak Core config
 {riak_core, [
              %% Default location of ringstate
              {ring_state_dir, "${RING_STATE_DIR}"},
              {platform_data_dir, "${PLATFORM_DATA_DIR}"},

              %% riak_handoff_port is the TCP port that Riak uses for
              %% intra-cluster data handoff.
              {handoff_port, 8099}
             ]},

  %% logger config
 {kernel, [
  {logger_level, info},
  {logger, [
    %% Console logger
    {handler, default, logger_std_h,
       #{formatter => {flatlog, #{
         map_depth => 3,
         term_depth => 50
        }}}
    },
    %% Disk logger for errors
    {handler, disk_log, logger_disk_log_h,
       #{config => #{
            file => "logs/error",
            type => wrap,
            max_no_files => 10,
            max_no_bytes => 52428800 % 10 x 5mb
         },
         level => error,
         formatter => {flatlog, #{
           map_depth => 3,
           term_depth => 50
         }}
        }
    }
  ]}
 ]},

 {ranch, [
        {pb_ip, "${PB_IP}"},
        {pb_port, 8087}
        ]},

  {prometheus, [{collectors, [prometheus_process_collector, default]}]},

  {antidote, [
    {pubsub_port, 8086},
    {logreader_port, 8085},
    {metrics_port, 3001}
  ]}
].
